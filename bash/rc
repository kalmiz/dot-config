#!/bin/bash
if [ -x "$(command -v rg)" ]; then
    export FZF_DEFAULT_COMMAND='rg --files'
else
    export FZF_DEFAULT_COMMAND="ack -f"
fi
#bind -x '"\C-p": vim $(fzf);'
export FZF_CTRL_T_COMMAND=$FZF_DEFAULT_COMMAND
export NVIM_LISTEN_ADDRESS="/tmp/nvimsocket"
export BROWSER="open -a safai"
if [ -x "$(command -v nvim)" ]; then
	export EDITOR="nvim"
else
	export EDITOR="vim"
fi
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

alias ll="ls -l"
alias vi=$EDITOR
alias r="nvr --remote"
alias e="$EDITOR \$(fzf)"
alias :q="exit"
# set kubectl config and namespace to help autocomplete.
# example: `$ kcn --namespace=prod
alias kcn="kubectl config set-context \$(kubectl config current-context)"

if [ $(uname) == "Darwin" ]; then
	[[ -s $(brew --prefix)/etc/profile.d/autojump.sh ]] && . $(brew --prefix)/etc/profile.d/autojump.sh
	export PS1='\W\$ '
	if [ -f /usr/local/bin/kubectl ]; then
		export PS1="[\$(kubectl config current-context)\$(kubectl config view | grep 'namespace: [a-z]*' | grep -o ': [a-z]*$')]$PS1"
	fi
fi

if [ -d $HOME/Projects ]; then
	export GOPATH=$HOME/Projects/go
	export PATH=$GOPATH/bin:$PATH
fi

if [ -d $HOME/bin ]; then
	export PATH=$HOME/bin:$PATH
fi

if [ -d $HOME/.cargo/bin ]; then
	export PATH="$HOME/.cargo/bin:$PATH"
fi

[ -f ~/.fzf.bash ] && source ~/.fzf.bash
[ -f /usr/local/etc/bash_completion ] && . /usr/local/etc/bash_completion
[ -f /Applications/Docker.app/Contents/Resources/etc/docker.bash-completion ] && . /Applications/Docker.app/Contents/Resources/etc/docker.bash-completion
[ -f /usr/local/bin/kubectl ] && . <(kubectl completion bash)
[ -f ~/.config/git/git-completion.bash ] && . ~/.config/git/git-completion.bash

complete -C aws_completer aws
